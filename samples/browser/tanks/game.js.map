{"version":3,"sources":["game.fsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,oCAWc;AAAA;AAAA;AAAA,KAXd;AAAA,sCAiBE,0CAjBF;AAAA,oCAoBc,+BApBd;AAqBA;AArBA,gCAuBY,qBAvBZ;;AAAA,4CAyBkB,mCAzBlB;;AAAA,8BA0BW,6BA1BX;AA2BA;AACA;AACA;AACA;;AA9BA,gDAgCoB,qCAhCpB;;AAAA,kCAiCa,+BAjCb;AAkCA;AACA;AACA;AACA;;AArCA,oDAuCsB,qCAvCtB;;AAAA,sCAwCe,iCAxCf;AAyCA;AACA;AACA;AACA;AA5CA;AAAA;AAAA;;AAkDc;AAAA;AAAW;;AAGjB;AAAU;;AAEd,YAAG,cAAH,EACI;AAAA,4BAAiB,mBAAjB;AAAoC;;AAExC,YAAG,cAAH,EACI;AAAA,4BAAiB,mBAAjB;AAAoC;;AAExC,YAAG,wBAAgB,cAAnB,EACI;AAAA;AACA,4CAAa,cAAb;AAA2B;;AAV3B;AAAO;;AAeX;AAAA,gCAAe,sBAAf,GACA,eAAe,sBADf,YAEA,eAAe,uBAFf,YAGA,eAAe,uBAHf;AAGsC;;AAGtC;AAAA,kBACI;AAAA,kCAAQ,UAAR;AACA,gCAAqB,oBAAqB,KAAM,mBAAhD;AACA,gCAAqB,oBAAqB,KAAM,mBAA3B,OAArB;AAA2E;;AAE/E,YAAG,iCAA0B,uBAA1B,WAAsD,qBAAtD,WAAgF,uBAAnF,EACI;AAAA;AACA;AACA;AACA;AAAU;;AAEd,YAAG,uBAAH,EACI;AAAA,+BAAoB,mCAApB;AAAiD;AAAA;;yCAGd;AAAA;AAAA,K;AAE3C;AACA;AACA;;AAGE;AAAA,qCAAkD;AAAA;AAAO,SAAzD;AAEA;AAIA;AAAsB;;AAExB","file":"game.js","sourceRoot":"C:/Users/Sarge/Documents/Docs/Advanced Programming/kod/Fable/browser/Bonus","sourcesContent":["#r \"../../node_modules/fable-core/Fable.Core.dll\"\r\n#load \"../../node_modules/fable-import-pixi/Fable.Import.Pixi.fs\"\r\n\r\nopen System\r\nopen Fable.Core\r\nopen Fable.Core.JsInterop\r\nopen Fable.Import.PIXI\r\nopen Fable.Import.Browser\r\n\r\nimportAll \"core-js\"\r\n\r\nlet options = [\r\n  BackgroundColor (float 0x1099bb)\r\n  Resolution 1.\r\n]\r\n\r\nlet renderer =\r\n  Globals.autoDetectRenderer( 800., 600., options )\r\n  |> unbox<SystemRenderer>\r\n\r\nlet gameDiv = document.getElementById(\"game\")\r\ngameDiv.appendChild( renderer.view )\r\n\r\nlet stage = Container()\r\n\r\nlet tankTexture = Texture.fromImage(\"tank.png\")\r\nlet tank = Sprite(tankTexture)\r\ntank.anchor.x <- 0.5\r\ntank.anchor.y <- 0.8\r\ntank.position.x <- 30.\r\ntank.position.y <- 570.\r\n\r\nlet bulletTexture = Texture.fromImage(\"bullet.png\")\r\nlet bullet = Sprite(bulletTexture)\r\nbullet.anchor.x <- 0.5\r\nbullet.anchor.y <- 0.5\r\nbullet.position.x <- 30.\r\nbullet.position.y <- 570.\r\n\r\nlet obsticleTexture = Texture.fromImage(\"bullet.png\")\r\nlet obsticle = Sprite(obsticleTexture)\r\nobsticle.anchor.x <- 0.5\r\nobsticle.anchor.y <- 0.5\r\nobsticle.position.x <- 400.\r\nobsticle.position.y <- 120.\r\n\r\nlet mutable bulletRot = 0.\r\nlet mutable isShot = false\r\nlet mutable drag = 0.\r\n\r\nlet shoot b = isShot <- b\r\n\r\nlet move (e : KeyboardEvent) =\r\n    let keyCode = int e.keyCode\r\n    \r\n    if keyCode = 65 then \r\n        tank.rotation <- tank.rotation - 0.1\r\n\r\n    if keyCode = 68 then\r\n        tank.rotation <- tank.rotation + 0.1\r\n\r\n    if keyCode = 32 || keyCode = 87 then \r\n        shoot true\r\n        bulletRot <- -tank.rotation\r\n        \r\n    null\r\n\r\nlet isHit (a:Sprite) (b:Sprite) =\r\n    a.position.x < b.position.x + b.width &&\r\n    b.position.x < a.position.x + a.width &&\r\n    a.position.y < b.position.y + b.height &&\r\n    b.position.y < a.position.y + a.height\r\n\r\nlet checkBullet shot =\r\n    if shot then\r\n        drag <- drag + 0.1\r\n        bullet.position.x <- bullet.position.x - (10. * Math.Sin(bulletRot)) \r\n        bullet.position.y <- bullet.position.y - (10. * Math.Cos(bulletRot)) + drag\r\n\r\n    if bullet.position.y < 0. || bullet.position.y > 600. || bullet.position.x < 0. || bullet.position.x > 800. then\r\n        bullet.position.x <- 30.\r\n        bullet.position.y <- 570.\r\n        isShot <- false\r\n        drag <- 0.\r\n\r\n    if isHit bullet obsticle then\r\n        obsticle.texture <- Texture.fromImage(\"boom.png\")\r\n\r\n\r\ndocument.addEventListener_keydown(fun e -> move(e))\r\n\r\nstage.addChild(tank) |> ignore\r\nstage.addChild(bullet) |> ignore\r\nstage.addChild(obsticle) |> ignore\r\n\r\nlet rec animate (dt:float) =\r\n  window.requestAnimationFrame(FrameRequestCallback animate) |> ignore\r\n\r\n  checkBullet isShot\r\n\r\n  //console.log(isShot)\r\n\r\n  renderer.render(stage)\r\n\r\nanimate 0."]}